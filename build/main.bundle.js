!function(e,o){for(var n in o)e[n]=o[n]}(exports,function(e){var o={};function n(r){if(o[r])return o[r].exports;var t=o[r]={i:r,l:!1,exports:{}};return e[r].call(t.exports,t,t.exports,n),t.l=!0,t.exports}return n.m=e,n.c=o,n.d=function(e,o,r){n.o(e,o)||Object.defineProperty(e,o,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,o){if(1&o&&(e=n(e)),8&o)return e;if(4&o&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&o&&"string"!=typeof e)for(var t in e)n.d(r,t,function(o){return e[o]}.bind(null,t));return r},n.n=function(e){var o=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(o,"a",o),o},n.o=function(e,o){return Object.prototype.hasOwnProperty.call(e,o)},n.p="",n(n.s=1)}([function(e,o){e.exports=require("loopback")},function(e,o,n){n(2).install();var r=n(0),t=e.exports=r();t.start=function(){return t.listen(function(){t.emit("started");var e=t.get("url").replace(/\/$/,"");if(console.log("Web server listening at: %s",e),t.get("loopback-component-explorer")){var o=t.get("loopback-component-explorer").mountPath;console.log("Browse your REST API at %s%s",e,o)}})},console.log("Executing boot instructions...");var i=n(3);i.config=n(4),i.dataSources=n(5),n(6)(t,i,function(e){if(e)throw console.error(`Boot error: ${e}`),e;console.log("Starting server...");t.start()}),console.log("Done.")},function(e,o){e.exports=require("source-map-support")},function(e){e.exports={env:"development",models:[{name:"User",config:{dataSource:"db"}},{name:"AccessToken",config:{dataSource:"db",public:!1}},{name:"ACL",config:{dataSource:"db",public:!1}},{name:"RoleMapping",config:{dataSource:"db",public:!1}},{name:"Role",config:{dataSource:"db",public:!1}},{name:"CoffeeShop",config:{dataSource:"mysqlDs",public:!0},definition:{name:"CoffeeShop",base:"PersistedModel",properties:{name:{type:"string",required:!0},city:{type:"string",required:!0}},validations:[],relations:{},acls:[],methods:[]},sourceFile:"./common/models/coffee-shop.js"},{name:"TestModel",config:{dataSource:"mysqlDs",public:!0},definition:{name:"TestModel",base:"PersistedModel",mixins:{ReadConfig:!0},properties:{},validations:[],relations:{},acls:[],methods:[]},sourceFile:"./common/models/test-model.js"}],middleware:{phases:["initial","session","auth","parse","routes","files","final"],middleware:[{sourceFile:"./node_modules/loopback",config:{phase:"initial:before"},fragment:"favicon"},{sourceFile:"./node_modules/compression",config:{phase:"initial"}},{sourceFile:"./node_modules/loopback",config:{paths:["${restApiRoot}"],phase:"routes"},fragment:"rest"},{sourceFile:"./node_modules/loopback",config:{params:"/home/wj42/work/training/loopback-webpack-example/client",phase:"files"},fragment:"static"},{sourceFile:"./node_modules/loopback",config:{phase:"final"},fragment:"urlNotFound"},{sourceFile:"./node_modules/errorhandler",config:{phase:"final:after"}}]},components:[{sourceFile:"./node_modules/loopback-component-explorer/index.js",config:{mountPath:"/explorer"}}],mixins:[{name:"ReadConfig",sourceFile:"./common/mixins/readConfig.js"}],files:{boot:["./server/boot/authentication.js","./server/boot/create-sample-models.js","./server/boot/root.js","./server/boot/routes.js"]}}},function(e,o){e.exports=require("../server/config.json")},function(e,o){e.exports=require("../server/datasources.json")},function(e,o,n){var r=n(7),t=n(8),i=n(9)("loopback:boot:executor"),s=n(10),a=n(11),c=(n(12).format,n(13)()),u=n(14);e.exports=function(e,o,a){a=a||function(){},e.booting=!0,function(e){if(e.loopback)return;try{e.loopback=n(0)}catch(e){throw"MODULE_NOT_FOUND"===e.code&&c.error("When using {{loopback-boot}} with {{loopback}} <1.9, the {{loopback}} module must be available for `{{require('loopback')}}`."),e}}(e),function(e){var o="1.x || 2.x || ^3.0.0-alpha",n=e.loopback,r=(n.version||"1.0.0").replace(/-.*$/,"");if(!t.satisfies(r,o)){var i=c.f("The `{{app}}` is powered by an incompatible {{loopback}} version %s. Supported versions: %s",n.version||"(unknown)",o);throw new Error(i)}}(e),function(e,o){var n=o.env;void 0!==n&&e.set("env",n)}(e,o),function(e,o){var n=process.env.npm_config_host||process.env.OPENSHIFT_SLS_IP||process.env.OPENSHIFT_NODEJS_IP||process.env.HOST||process.env.VCAP_APP_HOST||o.config.host||process.env.npm_package_config_host||e.get("host");void 0!==n&&(r("string"==typeof n,c.f("{{app.host}} must be a {{string}}")),e.set("host",n))}(e,o),function(e,o){var n=(t=[process.env.npm_config_port,process.env.OPENSHIFT_SLS_PORT,process.env.OPENSHIFT_NODEJS_PORT,process.env.PORT,process.env.VCAP_APP_PORT,o.config.port,process.env.npm_package_config_port,e.get("port"),3e3],i=function(e){return null!=e},t.filter(i)[0]);var t,i;if(void 0!==n){var s=typeof n;r("string"===s||"number"===s,c.f("{{app.port}} must be a {{string}} or {{number}}")),e.set("port",n)}}(e,o),function(e,o){var n=o.config.restApiRoot||e.get("restApiRoot")||"/api";r(void 0!==n,c.f("{{app.restBasePath}} is required")),r("string"==typeof n,c.f("{{app.restApiRoot}} must be a {{string}}")),r(/^\//.test(n),c.f('{{app.restApiRoot}} must start with "/"')),e.set("restApiRoot",n)}(e,o),function(e,o){var n=o.config;for(var r in n){var t=e.get(r);null==t&&e.set(r,n[r])}}(e,o),function(e,o){!function(e,o){if("object"!=typeof e)return;Object.keys(e).forEach(function(n){o(n,e[n])})}(o.dataSources,function(o,n){n=l(e,n,{useEnvVars:!0});var r=process.env.LB_LAZYCONNECT_DATASOURCES;r&&(n.lazyConnect="false"!==r&&"0"!==r),e.dataSource(o,n)})}(e,o),function(e,o){(function(e,o){var n=(e.registry||e.loopback).modelBuilder,r=e.loopback.Model,t=o.mixins||[];if(!n.mixins||!t.length)return;t.forEach(function(e){var o=u(e.sourceFile);"function"==typeof o||o.prototype instanceof r?(i("Defining mixin %s",e.name),n.mixins.define(e.name,o)):i("Skipping mixin file %s - `module.exports` is not a function or Loopback model",e)})})(e,o),function(e,o){var n=e.registry||e.loopback;o.models.forEach(function(o){var t,s=o.name;if(o.definition){if(function(e,o){if(!e.loopback[o.name])return!1;var n=o.sourceFile;return n&&f.test(n)}(e,o))t=n.getModel(s),r(t,c.f("Built-in model %s should have been defined",s)),i("Configuring built-in LoopBack model %s",s);else if(i("Creating new model %s %j",s,o.definition),t=n.createModel(o.definition),o.sourceFile){i("Loading customization script %s",o.sourceFile);var a=u(o.sourceFile);"function"==typeof a?(i("Customizing model %s",s),a(t)):i("Skipping model file %s - `module.exports` is not a function",o.sourceFile)}}else{if(!(t=n.getModel(s)))throw new Error(c.f("Cannot configure unknown model %s",s));i("Configuring existing model %s",s)}o._model=t})}(e,o),o.models.forEach(function(o){o.config&&e.model(o._model,o.config)})}(e,o),function(e,o){if(!o.middleware)return;var n=o.middleware.phases||[];r(Array.isArray(n),c.f("{{instructions.middleware.phases}} must be an {{array}}"));var t=o.middleware.middleware;r(Array.isArray(t),"instructions.middleware.middleware must be an object"),i("Defining middleware phases %j",n),e.defineMiddlewarePhases(n),t.forEach(function(o){i("Configuring middleware %j%s",o.sourceFile,o.fragment?"#"+o.fragment:"");var n=u(o.sourceFile);o.fragment&&(n=n[o.fragment].bind(n)),r("function"==typeof n,"Middleware factory must be a function");o.config=l(e,o.config,{useEnvVars:!0}),e.middlewareFromConfig(n,o.config)})}(e,o),function(e,o){o.components.forEach(function(o){i("Configuring component %j",o.sourceFile);var n=u(o.sourceFile);o.config=l(e,o.config,{useEnvVars:!0}),n(e,o.config)})}(e,o),s.series([function(n){!function(e,o,n){!function(e,o,n){var r=[];(o=o||[]).forEach(function(e){i("Requiring script %s",e);try{var o=u(e);"function"==typeof o&&(i("Exported function detected %s",e),r.push({path:e,func:o}))}catch(o){throw c.error("Failed loading boot script: %s\n%s",e,o.stack),o}}),s.eachSeries(r,function(o,n){i("Running script %s",o.path);var r=function(e){i("Async function %s %s",e?"failed":"finished",o.path),n(e),r=function(){}};try{var t=o.func(e,r);t&&"function"==typeof t.then?t.then(function(){r()},r):o.func.length<2&&(i("Sync function finished %s",o.path),n())}catch(e){i("Sync function failed %s",o.path,e),n(e)}},n)}(e,o.files.boot,n)}(e,o,n)},function(n){!function(e,o){var n=e.remotes().exports.swagger;if(!n)return;var r=o.config,t=r.swagger&&r.swagger.requireToken;n.requireToken=t||!1}(e,o),n()},process.nextTick],function(o){if(e.booting=!1,o)return a(o);e.emit("booted"),a()})};var f=new RegExp(["","node_modules","loopback","[^\\/\\\\]+","models","[^\\/\\\\]+\\.js$"].join("\\"+a.sep));function l(e,o,n){var r=/\$\{(\w+)\}$/,t=n&&n.useEnvVars;function s(o){var n=o,s=n.match(r);if(s){var a=s[1];if(t&&void 0!==process.env[a])i("Dynamic Configuration: Resolved via process.env: %s as %s",process.env[a],o),n=process.env[a];else if(void 0!==e.get(a)){i("Dynamic Configuration: Resolved via app.get(): %s as %s",e.get(a),o),n=e.get(a)}else n=void 0,c.warn('%s does not resolve to a valid value, returned as %s. "%s" must be resolvable in Environment variable or by app.get().',o,n,a),i("Dynamic Configuration: Cannot resolve variable for `%s`, returned as %s",a,n)}return n}return function e(o){if("string"==typeof o)return s(o);if("object"!=typeof o||null==o)return o;if(Array.isArray(o))return o.map(e);if(!o.constructor||o.constructor!==Object)return o;var n={};return Object.keys(o).forEach(function(r){var t=o[r];Array.isArray(t)?n[r]=t.map(e):"string"==typeof t?n[r]=s(t):null===t?n[r]=t:"object"==typeof t&&Object.keys(t).length?n[r]=e(t):n[r]=t}),n}(o)}},function(e,o){e.exports=require("assert")},function(e,o){e.exports=require("semver")},function(e,o){e.exports=require("debug")},function(e,o){e.exports=require("async")},function(e,o){e.exports=require("path")},function(e,o){e.exports=require("util")},function(e,o){e.exports=require("strong-globalize")},function(e,o,n){e.exports=function(e){var o=n(15)(e);return o&&o.__esModule?o.default:o}},function(e,o,n){var r={"./common/mixins/readConfig.js":16,"./common/models/coffee-shop.js":18,"./common/models/test-model.js":19,"./node_modules/compression":20,"./node_modules/errorhandler":21,"./node_modules/loopback":0,"./node_modules/loopback-component-explorer/index.js":22,"./server/boot/authentication.js":23,"./server/boot/create-sample-models.js":24,"./server/boot/root.js":25,"./server/boot/routes.js":26};function t(e){var o=i(e);return n(o)}function i(e){var o=r[e];if(!(o+1)){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}return o}t.keys=function(){return Object.keys(r)},t.resolve=i,e.exports=t,t.id=15},function(e,o,n){const r=n(17);e.exports=function(e){e.readConfig=((e,o)=>{o(null,r)}),e.remoteMethod("readConfig",{accepts:[{arg:"req",type:"object",http:{source:"req"}}],http:{path:"/readConfig",verb:"get"},description:"readConfig",returns:{arg:"config",type:"object",root:!0}})}},function(e,o){e.exports=require("./configs")},function(e,o){e.exports=function(e){e.status=function(e){var o=(new Date).getHours();console.log("Current hour is "+o),e(null,o>6&&o<20?"We are open for business.":"Sorry, we are closed. Open daily from 6am to 8pm.")},e.remoteMethod("status",{http:{path:"/status",verb:"get"},returns:{arg:"status",type:"string"}})}},function(e,o){e.exports=function(){}},function(e,o){e.exports=require("compression")},function(e,o){e.exports=require("errorhandler")},function(e,o){e.exports=require("loopback-component-explorer/index.js")},function(e,o){e.exports=function(e){e.enableAuth()}},function(e,o){e.exports=function(e){e.dataSources.mysqlDs.automigrate("CoffeeShop",function(o){if(o)throw o;e.models.CoffeeShop.create([{name:"Bel Cafe",city:"Vancouver"},{name:"Three Bees Coffee House",city:"San Mateo"},{name:"Caffe Artigiano",city:"Vancouver"}],function(e,o){if(e)throw e;console.log("Models created: \n",o)})})}},function(e,o){e.exports=function(e){var o=e.loopback.Router();o.get("/",e.loopback.status()),e.use(o)}},function(e,o){e.exports=function(e){e.get("/ping",function(e,o){o.send("pong")})}}]));
//# sourceMappingURL=main.bundle.js.map