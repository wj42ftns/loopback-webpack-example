!function(e,o){for(var n in o)e[n]=o[n]}(exports,function(n){var r={};function t(e){if(r[e])return r[e].exports;var o=r[e]={i:e,l:!1,exports:{}};return n[e].call(o.exports,o,o.exports,t),o.l=!0,o.exports}return t.m=n,t.c=r,t.d=function(e,o,n){t.o(e,o)||Object.defineProperty(e,o,{enumerable:!0,get:n})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(o,e){if(1&e&&(o=t(o)),8&e)return o;if(4&e&&"object"==typeof o&&o&&o.__esModule)return o;var n=Object.create(null);if(t.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:o}),2&e&&"string"!=typeof o)for(var r in o)t.d(n,r,function(e){return o[e]}.bind(null,r));return n},t.n=function(e){var o=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(o,"a",o),o},t.o=function(e,o){return Object.prototype.hasOwnProperty.call(e,o)},t.p="",t(t.s=1)}([function(e,o){e.exports=require("loopback")},function(e,o,n){n(2).install();var r=n(0),t=e.exports=r();t.start=function(){return t.listen(function(){t.emit("started");var e=t.get("url").replace(/\/$/,"");if(console.log("Web server listening at: %s",e),t.get("loopback-component-explorer")){var o=t.get("loopback-component-explorer").mountPath;console.log("Browse your REST API at %s%s",e,o)}})},console.log("Executing boot instructions...");var i=n(3);i.config=n(4),i.dataSources=n(5),n(6)(t,i,function(e){if(e)throw console.error("Boot error: ".concat(e)),e;console.log("Starting server...");t.start()}),console.log("Done.")},function(e,o){e.exports=require("source-map-support")},function(e){e.exports={env:"production",models:[{name:"User",config:{dataSource:"db"}},{name:"AccessToken",config:{dataSource:"db",public:!1}},{name:"ACL",config:{dataSource:"db",public:!1}},{name:"RoleMapping",config:{dataSource:"db",public:!1}},{name:"Role",config:{dataSource:"db",public:!1}},{name:"CoffeeShop",config:{dataSource:"mysqlDs",public:!0},definition:{name:"CoffeeShop",base:"PersistedModel",properties:{name:{type:"string",required:!0},city:{type:"string",required:!0}},validations:[],relations:{},acls:[],methods:[]},sourceFile:"./common/models/coffee-shop.js"},{name:"TestModel",config:{dataSource:"mysqlDs",public:!0},definition:{name:"TestModel",base:"PersistedModel",mixins:{ReadConfig:!0},properties:{},validations:[],relations:{},acls:[],methods:[]},sourceFile:"./common/models/test-model.js"}],middleware:{phases:["initial","session","auth","parse","routes","files","final"],middleware:[{sourceFile:"./node_modules/loopback",config:{phase:"initial:before"},fragment:"favicon"},{sourceFile:"./node_modules/compression",config:{phase:"initial"}},{sourceFile:"./node_modules/loopback",config:{paths:["${restApiRoot}"],phase:"routes"},fragment:"rest"},{sourceFile:"./node_modules/loopback",config:{params:"/home/wj42/work/training/loopback-webpack-example/client",phase:"files"},fragment:"static"},{sourceFile:"./node_modules/loopback",config:{phase:"final"},fragment:"urlNotFound"},{sourceFile:"./node_modules/errorhandler",config:{phase:"final:after"}}]},components:[{sourceFile:"./node_modules/loopback-component-explorer/index.js",config:{mountPath:"/explorer"}}],mixins:[{name:"ReadConfig",sourceFile:"./common/mixins/readConfig.js"}],files:{boot:["./server/boot/authentication.js","./server/boot/create-sample-models.js","./server/boot/root.js","./server/boot/routes.js"]}}},function(e,o){e.exports=require("../server/config.json")},function(e,o){e.exports=require("../server/datasources.json")},function(e,o,w){var S=w(7),C=w(8),O=w(9)("loopback:boot:executor"),E=w(10),n=w(11),F=(w(12).format,w(13)()),P=w(14);e.exports=function(s,a,o){var e,n,r,t,i,c,u,f,l,p,d,m,g,v,b,h,y,x,_,k,j;o=o||function(){},s.booting=!0,function(e){if(e.loopback)return;try{e.loopback=w(0)}catch(e){throw"MODULE_NOT_FOUND"===e.code&&F.error("When using {{loopback-boot}} with {{loopback}} <1.9, the {{loopback}} module must be available for `{{require('loopback')}}`."),e}}(s),function(e){var o="1.x || 2.x || ^3.0.0-alpha",n=e.loopback,r=(n.version||"1.0.0").replace(/-.*$/,"");if(!C.satisfies(r,o)){var t=F.f("The `{{app}}` is powered by an incompatible {{loopback}} version %s. Supported versions: %s",n.version||"(unknown)",o);throw new Error(t)}}(s),e=s,void 0!==(n=a.env)&&e.set("env",n),r=s,t=a,void 0!==(i=process.env.npm_config_host||process.env.OPENSHIFT_SLS_IP||process.env.OPENSHIFT_NODEJS_IP||process.env.HOST||process.env.VCAP_APP_HOST||t.config.host||process.env.npm_package_config_host||r.get("host"))&&(S("string"==typeof i,F.f("{{app.host}} must be a {{string}}")),r.set("host",i)),function(e,o){var n=(r=[process.env.npm_config_port,process.env.OPENSHIFT_SLS_PORT,process.env.OPENSHIFT_NODEJS_PORT,process.env.PORT,process.env.VCAP_APP_PORT,o.config.port,process.env.npm_package_config_port,e.get("port"),3e3],t=function(e){return null!=e},r.filter(t)[0]);var r,t;if(void 0!==n){var i=typeof n;S("string"===i||"number"===i,F.f("{{app.port}} must be a {{string}} or {{number}}")),e.set("port",n)}}(s,a),c=s,u=a.config.restApiRoot||c.get("restApiRoot")||"/api",S(void 0!==u,F.f("{{app.restBasePath}} is required")),S("string"==typeof u,F.f("{{app.restApiRoot}} must be a {{string}}")),S(/^\//.test(u),F.f('{{app.restApiRoot}} must start with "/"')),c.set("restApiRoot",u),function(e,o){var n=o.config;for(var r in n){var t=e.get(r);null==t&&e.set(r,n[r])}}(s,a),p=s,f=a.dataSources,l=function(e,o){o=q(p,o,{useEnvVars:!0});var n=process.env.LB_LAZYCONNECT_DATASOURCES;n&&(o.lazyConnect="false"!==n&&"0"!==n),p.dataSource(e,o)},"object"==typeof f&&Object.keys(f).forEach(function(e){l(e,f[e])}),m=y=a,g=((d=h=s).registry||d.loopback).modelBuilder,v=d.loopback.Model,b=m.mixins||[],g.mixins&&b.length&&b.forEach(function(e){var o=P(e.sourceFile);"function"==typeof o||o.prototype instanceof v?(O("Defining mixin %s",e.name),g.mixins.define(e.name,o)):O("Skipping mixin file %s - `module.exports` is not a function or Loopback model",e)}),_=y,k=(x=h).registry||x.loopback,_.models.forEach(function(e){var o,n=e.name;if(e.definition){if(function(e,o){if(!e.loopback[o.name])return!1;var n=o.sourceFile;return n&&A.test(n)}(x,e))o=k.getModel(n),S(o,F.f("Built-in model %s should have been defined",n)),O("Configuring built-in LoopBack model %s",n);else if(O("Creating new model %s %j",n,e.definition),o=k.createModel(e.definition),e.sourceFile){O("Loading customization script %s",e.sourceFile);var r=P(e.sourceFile);"function"==typeof r?(O("Customizing model %s",n),r(o)):O("Skipping model file %s - `module.exports` is not a function",e.sourceFile)}}else{if(!(o=k.getModel(n)))throw new Error(F.f("Cannot configure unknown model %s",n));O("Configuring existing model %s",n)}e._model=o}),y.models.forEach(function(e){e.config&&h.model(e._model,e.config)}),function(n,e){if(!e.middleware)return;var o=e.middleware.phases||[];S(Array.isArray(o),F.f("{{instructions.middleware.phases}} must be an {{array}}"));var r=e.middleware.middleware;S(Array.isArray(r),"instructions.middleware.middleware must be an object"),O("Defining middleware phases %j",o),n.defineMiddlewarePhases(o),r.forEach(function(e){O("Configuring middleware %j%s",e.sourceFile,e.fragment?"#"+e.fragment:"");var o=P(e.sourceFile);e.fragment&&(o=o[e.fragment].bind(o)),S("function"==typeof o,"Middleware factory must be a function");e.config=q(n,e.config,{useEnvVars:!0}),n.middlewareFromConfig(o,e.config)})}(s,a),j=s,a.components.forEach(function(e){O("Configuring component %j",e.sourceFile);var o=P(e.sourceFile);e.config=q(j,e.config,{useEnvVars:!0}),o(j,e.config)}),E.series([function(e){var o,t,n,r,i;o=e,t=s,n=a.files.boot,r=o,i=[],(n=n||[]).forEach(function(o){O("Requiring script %s",o);try{var e=P(o);"function"==typeof e&&(O("Exported function detected %s",o),i.push({path:o,func:e}))}catch(e){throw F.error("Failed loading boot script: %s\n%s",o,e.stack),e}}),E.eachSeries(i,function(o,n){O("Running script %s",o.path);var r=function(e){O("Async function %s %s",e?"failed":"finished",o.path),n(e),r=function(){}};try{var e=o.func(t,r);e&&"function"==typeof e.then?e.then(function(){r()},r):o.func.length<2&&(O("Sync function finished %s",o.path),n())}catch(e){O("Sync function failed %s",o.path,e),n(e)}},r)},function(e){!function(e,o){var n=e.remotes().exports.swagger;if(!n)return;var r=o.config,t=r.swagger&&r.swagger.requireToken;n.requireToken=t||!1}(s,a),e()},process.nextTick],function(e){if(s.booting=!1,e)return o(e);s.emit("booted"),o()})};var A=new RegExp(["","node_modules","loopback","[^\\/\\\\]+","models","[^\\/\\\\]+\\.js$"].join("\\"+n.sep));function q(t,e,o){var i=/\$\{(\w+)\}$/,s=o&&o.useEnvVars;function a(e){var o=e,n=o.match(i);if(n){var r=n[1];if(s&&void 0!==process.env[r])O("Dynamic Configuration: Resolved via process.env: %s as %s",process.env[r],e),o=process.env[r];else if(void 0!==t.get(r)){O("Dynamic Configuration: Resolved via app.get(): %s as %s",t.get(r),e),o=t.get(r)}else o=void 0,F.warn('%s does not resolve to a valid value, returned as %s. "%s" must be resolvable in Environment variable or by app.get().',e,o,r),O("Dynamic Configuration: Cannot resolve variable for `%s`, returned as %s",r,o)}return o}return function n(r){if("string"==typeof r)return a(r);if("object"!=typeof r||null==r)return r;if(Array.isArray(r))return r.map(n);if(!r.constructor||r.constructor!==Object)return r;var t={};return Object.keys(r).forEach(function(e){var o=r[e];Array.isArray(o)?t[e]=o.map(n):"string"==typeof o?t[e]=a(o):null===o?t[e]=o:"object"==typeof o&&Object.keys(o).length?t[e]=n(o):t[e]=o}),t}(e)}},function(e,o){e.exports=require("assert")},function(e,o){e.exports=require("semver")},function(e,o){e.exports=require("debug")},function(e,o){e.exports=require("async")},function(e,o){e.exports=require("path")},function(e,o){e.exports=require("util")},function(e,o){e.exports=require("strong-globalize")},function(e,o,n){e.exports=function(e){var o=n(15)(e);return o&&o.__esModule?o.default:o}},function(e,o,n){var r={"./common/mixins/readConfig.js":16,"./common/models/coffee-shop.js":17,"./common/models/test-model.js":18,"./node_modules/compression":19,"./node_modules/errorhandler":20,"./node_modules/loopback":0,"./node_modules/loopback-component-explorer/index.js":21,"./server/boot/authentication.js":22,"./server/boot/create-sample-models.js":23,"./server/boot/root.js":24,"./server/boot/routes.js":25};function t(e){var o=i(e);return n(o)}function i(e){var o=r[e];if(o+1)return o;var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}t.keys=function(){return Object.keys(r)},t.resolve=i,(e.exports=t).id=15},function(e,o){e.exports=function(e){e.readConfig=function(e,o){o(null,{test:42})},e.remoteMethod("readConfig",{accepts:[{arg:"req",type:"object",http:{source:"req"}}],http:{path:"/readConfig",verb:"get"},description:"readConfig",returns:{arg:"config",type:"object",root:!0}})}},function(e,o){e.exports=function(e){e.status=function(e){var o=(new Date).getHours();console.log("Current hour is "+o),e(null,6<o&&o<20?"We are open for business.":"Sorry, we are closed. Open daily from 6am to 8pm.")},e.remoteMethod("status",{http:{path:"/status",verb:"get"},returns:{arg:"status",type:"string"}})}},function(e,o){e.exports=function(){}},function(e,o){e.exports=require("compression")},function(e,o){e.exports=require("errorhandler")},function(e,o){e.exports=require("loopback-component-explorer/index.js")},function(e,o){e.exports=function(e){e.enableAuth()}},function(e,o){e.exports=function(o){o.dataSources.mysqlDs.automigrate("CoffeeShop",function(e){if(e)throw e;o.models.CoffeeShop.create([{name:"Bel Cafe",city:"Vancouver"},{name:"Three Bees Coffee House",city:"San Mateo"},{name:"Caffe Artigiano",city:"Vancouver"}],function(e,o){if(e)throw e;console.log("Models created: \n",o)})})}},function(e,o){e.exports=function(e){var o=e.loopback.Router();o.get("/",e.loopback.status()),e.use(o)}},function(e,o){e.exports=function(e){e.get("/ping",function(e,o){o.send("pong")})}}]));